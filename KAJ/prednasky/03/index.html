<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,user-scalable=0" />
		<base target="_blank" />
		<title>ES 2015, historie a transpilace</title>
	</head>
	<body>
		
<h1>ES 2015, historie a transpilace</h1>

<section class="slide">
	<h2>ES 2015, historie a transpilace</h2>
	<ul>
		<li>Webov치 interaktivn칤 prezentace</li>
		<li>"?" zobraz칤 kr치tkou n치pov캩du</li>
		<li>Tisk jako obvykle</li>
		<li>Pro pokra캜ov치n칤 stiskn캩te mezern칤k</li>
	</ul>
</section>

<section class="slide">
	<h2>Obsah</h2>
	<ol>
		<li>Jak si stoj칤 ES 2015</li>
		<li>Novinky ES 2015: syntaxe</li>
		<li>Novinky ES 2015: roz코칤콏en칤 ES5</li>
		<li>Kde a jak si to lze vyzkou코et?</li>
	</ol>
</section>

<section class="slide">
	<h2>ES6</h2>

	<ul>
		<li>Form치ln캩 ECMAScript 2015, v쬴l se n치zev ES6</li>
		<li>Nejnov캩j코칤 standardizovan치 iterace jazyka</li>
		<li>D콏칤ve ozna캜ov치no jako <em>Harmony</em></li>
		<li>V칳voj zhruba 2008&ndash;2015</li>
		<li>V roce 2016 vznikla dal코칤 verze ES7</li>
		<li>V roce 2017 vznikla dal코칤 verze ES8</li>
		<li>V roce 2018 vznikla dal코칤 verze ES9</li>
		<li>Aktu치ln캩 pr치ce na ES10</li>
	</ul>
</section>

<section class="slide">
	<h2>let, const</h2>

	<ul>
		<li>let = var + block scope</li>
		<li>const = let + read-only</li>
	</ul>

	<code class="block" data-syntax="js">const N = 8;
N = 4; // exception

let x = 1;
if (true) {
	let x = 2;
}
alert(x); // 1
</code>
</section>

<section class="slide">
	<h2>Arrow functions</h2>

	<ul>
		<li>Zkr치cen치 syntaxe definice funkc칤</li>
		<li>Lexical this (nelze <code>call, apply, new</code>)</li>
		<li>Pokud m치 t캩lo funkce jedin칳 p콏칤kaz, nen칤 t콏eba <code>return</code> ani z치vorky</li>
	</ul>

	<code class="block" data-syntax="js">var square = a => a*a;
var add = (a, b) => a+b;

// lexical this
setTimeout( () => this.doStuff(), 1000 );
</code>
</section>

<section class="slide">
	<h2>Enhanced object literals</h2>

	<ul>
		<li>Zkr치cen치 definice objekt콢</li>
	</ul>

	<code class="block" data-syntax="js">var x = 42;

var obj = {
	x,                  // "x":42
	y() { return x; },
	["data_" + x]: x    // "data_42":42
}
</code>
</section>

<section class="slide">
	<h2>Template string literals</h2>

	<ul>
		<li>Nahrazov치n칤 콏et캩zc콢</li>
		<li>Odpad치 nutnost "s캜칤t치n칤"</li>
		<li>Sm칤 obsahovat newline</li>
		<li>Mo쬹ost vlastn칤 interpola캜n칤 funkce</li>
	</ul>

	<code class="block" data-syntax="js">var x = "world";
var y = `hello ${x}`;
var z = `this is a
			very long string`;

// html je u쬴v. funkce, kter치 dostane jednotliv칠 tokeny k naform치tov치n칤
html`&lt;div&gt; ${unsafe} &lt;/div&gt;`;
</code>
</section>

<section class="slide">
	<h2>Destructuring</h2>

	<ul>
		<li>Snaz코칤 p콏칤stup k vlastnostem struktur a pol칤</li>
	</ul>

	<code class="block" data-syntax="js">var [a, b, c] = [1, 2, 3];

var f = function() { return {x:42}; }
var { x } = f();
</code>
</section>

<section class="slide">
	<h2>Default + Rest + Spread</h2>

	<ul>
		<li>V칳choz칤 hodnoty parametr콢</li>
		<li>P콏evod (podmno쬴ny) parametr콢 na pole a zp캩t</li>
	</ul>

	<code class="block" data-syntax="js">var f = function(x, y = 12) {
	return x + y;
}
f(10); // 22

var f = function(x, ...y) {
	alert(y.length);
}
f(1, 2, 3); // 2

var f = function(a, b, c) { return c; }
f(...[1, 2, 3]); // 3
</code>
</section>

<section class="slide">
	<h2>Classes</h2>

	<ul>
		<li>Nov치 syntaxe, star칠 chov치n칤 (st치le se jedn치 o prototypovou d캩di캜nost)</li>
	</ul>

	<code class="block" data-syntax="js">class B extends A {
	constructor(x) {
		super(); // v konstruktoru d캩d칤c칤 t콏칤dy povinn칠; p콏ed n칤m neexistuje this
		this.x = x;
	}

	get something() { /* .... */ }

	f1() {
		super.f1();
		return this.x;
	}

	static f2() {}
}
</code>
</section>

<section class="slide">
	<h2>Modules</h2>

	<ul>
		<li>Modularizace na syntaktick칠 칰rovni</li>
		<li>Jeden v칳choz칤 a libovoln캩 dal코칤ch pojmenovan칳ch export콢</li>
	</ul>

	<code class="block" data-syntax="js">// a.js
export var A = function() {};
export default function() {};

// b.js
import { A } from "./a.js";
A();

import myLocalName from "./a.js"; // default
</code>
</section>

<section class="slide">
	<h2>{Weak,}{Map,Set}</h2>

	<ul>
		<li>Set: mno쬴na unik치tn칤ch hodnot</li>
		<li>Map: dvojice cokoliv-cokoliv</li>
		<li>WeakMap, WeakSet: bez reference na objekt, bez iterovatelnosti</li>
	</ul>

	<code class="block" data-syntax="js">var s = new Set();
s.add("hello").add("goodbye").add("hello");
s.size == 2;
s.has("hello") == true;

var m = new Map();
m.set("hello", 42);
m.set(s, 34);
m.get(s) == 34;
</code>
</section>

<section class="slide">
	<h2>&hellip;a to je코t캩 nen칤 v코echno.</h2>
	<p style="text-align:center; height:70%"><img src="ready.jpg" style="height:100%"/></p>
</section>

<section class="slide">
	<h2>Symbols</h2>

	<ul>
		<li>Nov칳 datov칳 typ pro 콏칤zen칤 p콏칤stupu</li>
		<li>Nen칤 zcela priv치tn칤, ale alespo켿 je unik치tn칤</li>
	</ul>

	<code class="block" data-syntax="js">(function() {
	var moneyKey = Symbol("money");
	typeof(moneyKey) == "symbol";

	var Person = function() {
		this[moneyKey] = 10000;
	}

	var person = new Person();
	person.money == undefined;

	Object.getOwnPropertySymbols(person); // :-(
})();
</code>
</section>

<section class="slide">
	<h2>Iterators + for..of</h2>

	<ul>
		<li>Programovateln치 iterovatelnost</li>
		<li>Cokoliv, co m치 metodu <code>next</code> je iter치tor</li>
		<li>Cokoliv, co m치 symbol <code>Symbol.iterator</code> je iterovateln칠 cyklem <code>for..of</code></li>
	</ul>

	<code class="block" data-syntax="js">let fibonacci = {
	[Symbol.iterator]() {
		let pre = 0, cur = 1;
		return {
			next() {
				[pre, cur] = [cur, pre + cur];
				return { done: false, value: cur }
			}
		}
	}
}

for (var n of fibonacci) {
  if (n > 1000) break;
  console.log(n);
}
</code>
</section>

<section class="slide">
	<h2>Generators</h2>

	<ul>
		<li>Speci치ln칤 druh funkce</li>
		<li>N치vratovou hodnotou je iter치tor</li>
		<li>Kl칤캜ov칠 slovo <code>yield</code> odpov칤d치 p콏eru코en칤 po jedn칠 iteraci</li>
	</ul>

	<code class="block" data-syntax="js">var generator = function*() {
	var tmp = 1;
	while (true) {
		tmp *= 3;
		yield tmp;
	}
}

var iterator = generator();
iterator.next().value; // 3, next() vrac칤 i done:true/false
iterator.next().value; // 9
iterator.next().value; // 27
</code>
</section>

<section class="slide">
	<h2>Proxies</h2>

	<ul>
		<li>Monitorov치n칤 libovoln칠ho p콏칤stupu k objekt콢m</li>
		<li>캛ten칤, z치pis, vol치n칤, &hellip;</li>
	</ul>

	<code class="block" data-syntax="js">var obj = {};

var interceptor = {
	get: function (receiver, name) {
		return `Hello, ${name}!`;
	}
};

var p = new Proxy(obj, interceptor);
p.world === "Hello, world!"
</code>
</section>

<section class="slide">
	<h2>Reflect</h2>

	<ul>
		<li>Rozhran칤 pro introspekci objekt콢</li>
		<li>Metody podobn칠 t캩m v <code>Object.*</code></li>
		<li>Nam칤sto v칳jimek vrac칤 false</li>
	</ul>

	<code class="block" data-syntax="js">Reflect.defineProperty(obj, name, descriptor);
Reflect.construct(F, args);
Reflect.get(obj, property, thisForGetter);
/* ... */
</code>
</section>

<section class="slide">
	<h2>Roz코칤콏en칤 ES5 #1</h2>

	<code class="block" data-syntax="js">Number.EPSILON
Number.MAX_SAFE_INTEGER
Number.MIN_SAFE_INTEGER
Number.isInteger(Infinity)                      // false
Number.isNaN("NaN")                             // false

Math.acosh(3)                                   // 1.762747174039086
Math.hypot(3, 4)                                // 5
Math.imul(Math.pow(2, 32)-1, Math.pow(2, 32)-2) // 2
Math.sign(5)                                    // 1
Math.trunc(3.1)                                 // 3
/* ... */

"abc".repeat(3)                                 // "abcabcabc"
</code>
</section>

<section class="slide">
	<h2>Roz코칤콏en칤 ES5 #2</h2>

	<code class="block" data-syntax="js">Array.from(document.querySelectorAll("*")) // real Array
Array.of(1, 2, 3)                          // without special one-arg behavior
[0, 0, 0].fill(7, 1)                       // [0, 7, 7]
[1, 2, 3].find(x => x == 3)                // 3
[1, 2, 3].findIndex(x => x == 2)           // 1
[1, 2, 3, 4, 5].copyWithin(3, 0)           // [1, 2, 3, 1, 2]
["a", "b", "c"].entries()                  // iterator [0, "a"], [1,"b"], [2,"c"]
["a", "b", "c"].keys()                     // iterator 0, 1, 2
["a", "b", "c"].values()                   // iterator "a", "b", "c"

Object.assign(target, { source: "data" });
</code>
</section>

<section class="slide">
	<h2>Ostatn칤</h2>

	<ul>
		<li>Pr치ce s Unicode znaky mimo BMP (tj. code points &gt; 65535): 
			<span title="U+1F602 FACE WITH TEARS OF JOY">游땍</span>,
			<span title="U+1F4A9 PILE OF POO">游눨</span>, 
			<span title="U+1F923 ROLLING ON THE FLOOR LAUGHING">游뱎</span>,
			<span title="U+1F953 BACON">游볩</span>,
			&hellip;</li>
		<li>Subclassing vestav캩n칳ch objekt콢 (Array, Element, &hellip;)</li>
		<li>Garantovan칠 Tail Call Optimisation</li>
		<li><code>new Promise((resolve, reject) => {}), Promise.all, Promise.race</code></li>
	</ul>
</section>

<section class="slide">
	<h2>Jak zkou코et ES 2015+?</h2>

	<ul>
		<li><a href="https://kangax.github.io/compat-table/es6/">Compatibility table</a></li>
		<li>Pro n캩co lze polyfill (<code>Array.from</code>, <code>Promise</code>, &hellip;)</li>
		<li>N캩kterou syntaxi lze <em>transpilovat</em> (viz d치le)</li>
		<li>N캩co nelze v콢bec (<code>WeakMap, WeakSet, Proxy</code>)</li>
	</ul>
</section>

<section class="slide">
	<h2>Transpilace ES 2015+</h2>

	<ul>
		<li>Proces konverze syntaxe ES 2015+ do ES5</li>
		<li><a href="https://github.com/babel/babel">Babel</a>, <a href="https://github.com/google/traceur-compiler">Google Traceur Compiler</a></li>
		<li>Babel s nejlep코칤 podporou</li>
		<li>Pro n캩kter칠 novinky nutno dodat polyfilly</li>
		<li>Problematick치 ot치zka ES 2015 modul콢</li>
	</ul>
</section>

<section class="slide">
	<h2>Babel v praxi</h2>

	<ul>
		<li>Online h콏i코t캩 na <a href="http://babeljs.io/repl/">http://babeljs.io/repl/</a></li>
		<li>Ke sta쬰n칤 jako npm modul</li>
		<li>Ke sta쬰n칤 t칠 jako ohromn칳 kus ES5 (transformace za b캩hu)</li>
	</ul>
</section>

<section class="slide">
	<h2>Moduly v praxi</h2>

	<ul>
		<li>Implementov치no jen v <a href="https://caniuse.com/#search=es6-module">nejnov캩j코칤ch verz칤ch</a> prohl칤쬰캜콢</li>
		<li>Alternativa #1: <em>bundling</em> do jednoho souboru n치strojem <a href="http://rollupjs.org/">Rollup</a></li>
		<li>Alternativa #2: <em>transpilace</em> do jin칠ho (kompatibiln캩j코칤ho) form치tu modul콢</li>
	</ul>
</section>

<section class="slide">
	<h2>Transpilace modul콢</h2>

	<ul>
		<li>Konverze do CommonJS, AMD nebo SystemJS</li>
		<li>V쬯y nutno dodat dal코칤 podp콢rn칳 k칩d (Browserify, Webpack, RequireJS, &hellip;)</li>
		<li>V칤ce viz <a href="http://ondras.zarovi.cz/slides/devel2016/">p콏edn치코ka na devel.cz 2016</a></li>
	</ul>
</section>

<section class="slide">
	<h2>ES 2016</h2>

	<ul>
		<li>Oper치tor <code>**</code></li>
		<li><code data-syntax="js">Array.prototype.includes</code></li>
		<li>...that's all, folks</li>
	</ul>
</section>

<section class="slide">
	<h2>ES 2017</h2>

	<ul>
		<li><code data-syntax="js">async/await</code></li>
		<li><code data-syntax="js">String.prototype.pad{Start,End}</code></li>
		<li><code data-syntax="js">SharedArrayBuffer, Atomics</code></li>
		<li>Funkcion치ln칤 iterace objekt콢</li>
	</ul>
</section>

<section class="slide">
	<h2>ES 2018</h2>

	<ul>
		<li><code data-syntax="js">rest/spread</code> pro objekty</li>
		<li>Asynchronn칤 iterace <code data-syntax="js">for-await-of</code></li>
		<li><code data-syntax="js">Promise.prototype.finally</code></li>
		<li>Nov칠 schopnosti regul치rn칤ch v칳raz콢: lookbehind, named capture, single line flag</li>
	</ul>
</section>

<section class="slide">
	<h2>Prostor pro ot치zky</h2>
</section>

<footer>
	<a href="http://twitter.com/0ndras">twitter.com/0ndras</a>
	<a href="mailto:ondrej.zara@firma.seznam.cz">ondrej.zara@firma.seznam.cz</a>
</footer>

<script src="../../jsslides/v3/slides/slides3.js"></script>
<script>
	Slides.modules.skin = "cvut";
	Slides.modules.numbering = false;
</script>

</body>
</html>
